# predicto_api
Python library for predicto api for financial timeseries forecasting.

Predicto generates daily forecasts and Trade Picks for a number of stocks using intelligible Deep Learning models.

More info at [https://predic.to](https://predic.to)

## Usage

Start by installing required packages

```
pip install -r predicto_api/requirements.txt
```

To use predicto_api wrapper, you'll need a valid account at https://predic.to, and an `api_session_id` that you can find in your settings page.

```python
import pandas as pd
from predicto_api_wrapper import PredictoApiWrapper

# retrieve api_session_id from your https://predic.to/settings page
api_session_id = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# prepare our predicto api wrapper
predicto_api_wrapper = PredictoApiWrapper(api_session_id)

# get suppported tickers for which daily forecasts are available
tickers_json = predicto_api_wrapper.get_supported_tickers()
tickers_df = pd.DataFrame(tickers_json)

# define the ticker and date we are interested in (use yesterday's date to get latest)
ticker = 'TSLA'
date = '2020-11-28'

# get forecast dataframe
forecast_json = predicto_api_wrapper.get_forecast(ticker, date)
forecast_df = pd.read_json(forecast_json, orient='index')

# get trade pick based on that forecast (entry, exit, stop-loss price)
trade_pick_json = predicto_api_wrapper.get_trade_pick(ticker, date)
```
## Using Predicto with Alpaca to setup daily AutoTrader
Make sure you understand the risks if you are using real money!
We recommend that you start by experimenting with an Alpaca Paper acccount.

```
from predicto_api_wrapper import PredictoApiWrapper, TradeAction
from alpaca_api_wrapper import AlpacaApiWrapper

# initialize alpaca api wrapper
alpaca_api_endpoint = 'https://paper-api.alpaca.markets' # use paper money endpoint for now (test env)
alpaca_api_key_id = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
alpaca_api_secret_key = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

alpaca_wrapper = AlpacaApiWrapper(alpaca_api_endpoint, alpaca_api_key_id, alpaca_api_secret_key)

# initialize predicto api wrapper
predicto_api_session_id = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
predicto_api_wrapper = PredictoApiWrapper(predicto_api_session_id)
predicto_api_wrapper.set_alpaca_api_wrapper(alpaca_wrapper)

# Execute Predicto AutoTrader
# You can schedule this script to run daily before market open (6.30am E.T.)
# Note: Make sure you understand the risks if you are using real money!
predicto_api_wrapper.submit_latest_trade_picks(
                                        abs_change_pct_threshold = 0.02,
                                        actions = [int(TradeAction.Buy), int(TradeAction.Sell)],
                                        average_uncertainty = 0.15,
                                        model_avg_roi = 0.0,
                                        symbols = None,
                                        investmentAmountPerTrade=1000)
```

## Autotrader sample

Sample AutoTrader using Predicto Forecasts with Alpaca can be found in [autotrader_daily.py](samples/autotrader_daily.py) in the `samples` folder.

## Jupyter Notebook For Predicto interactions

For detailed usage of PredictoApiWrapper, check the [example_usage.ipynb](Notebooks/example_usage.ipynb) in the `Notebooks` folder.

## Jupyter Notebook for Alpaca API integration

You can use latest Forecasts and Trade Picks generated by Predicto with Alpaca API. To see how, check the [alpaca_integration.ipynb](Notebooks/alpaca_integration.ipynb) in the `Notebooks` folder.

More info on Alpaca API and for documentation, check https://alpaca.markets/.

## More info

For more information on how our Deep Learning forecasts are generated, follow us on https://medium.com/@thepredicto
